# 03) Gameplay Loops & Session Flow

## 1. 용어
- **런(run)**: 한 판(웨이브 1~N) 단위 플레이
- **코어 루프(core loop)**: 런 중 반복되는 행동 사이클
- **메타 루프(meta loop)**: 런 밖(계정/성장)에서 반복되는 사이클

## 2. 코어 루프(런 내부)
### 2.1 30초 단위 미니 루프
1) 자원 획득(자동/처치/이자)  
2) 소환/합성/배치  
3) 전투 진행(자동 전투)  
4) 결과 확인(피해/사망/시너지 변화)  
→ 다시 1)

### 2.2 웨이브 단위 루프(2~3분)
- 준비(상점/소환) → 웨이브 전투 → 보상 선택(유물/골드/회복) → 다음 웨이브

## 3. 메타 루프(런 외부)
1) 런 결과(클리어/사망)  
2) 메타 재화 획득(예: 봉식 훈장, 보급품 상자)  
3) 영구 업그레이드/해금(유닛 풀 확장, 시작 유물 슬롯, 기본 능력)  
4) 다음 런에서 선택지 증가  
→ 다시 1)

## 4. 세션 플로우(화면/상태)
### 4.1 홈(로비)
- “시작” / “업그레이드” / “도감” / “임무” / “설정”

### 4.2 런 시작
- 챕터 선택(난이도) + 시작 보너스(선택형: 골드, 유물, 티켓 등)

### 4.3 런 진행 상태 머신(권장)
- `Prepare`(소환/합성/배치)  
- `Combat`(자동 전투)  
- `Reward`(유물/보상 선택)  
- `BossIntro`(짧은 대사/연출)  
- `Result`(클리어/실패, 통계/드랍)

## 5. “운빨”을 설계로 제어하는 방법(권장 옵션)
- **가중치 테이블 + 단계 해금**: 초반엔 낮은 티어 중심, 진행할수록 상위 티어 가중치 증가
- **선택형 보상(유물)**을 강하게: 운이 말려도 유물 선택으로 빌드 방향 확보
- **상점 리롤 비용 증가** 같은 경제적 트레이드오프

## 6. 튜토리얼(초기 UX)
- “1분 이내”로 끝내기
- 첫 런은 확률을 보정해 “합성/시너지”를 한번은 경험하게 하기

## 7. Codex 산출물(설계)
- 상태 머신 구현(Prepare/Combat/Reward/Result)
- 런 데이터 구조(시드, 웨이브 번호, 보드, 인벤토리, 유물)
- 저장/복구(중단 후 재개) 요구사항을 11문서에 맞춰 반영
