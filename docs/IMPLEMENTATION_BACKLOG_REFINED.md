# Implementation Backlog Refined (문서 정합성 반영)

> 목적: `docs/12_PRODUCTION_PLAN_BACKLOG.md`를 구현 의존성 기준으로 재정렬한다.

## 1. Epic A — Foundation (M0 선행)

### A1. 프로젝트 부트스트랩

- 작업
  - 웹 프로젝트 초기 구조 생성 (`src/game`, `src/content`, `src/render`, `src/ui`)
  - Phaser + React 경계 설정
- 완료 기준
  - 로컬 실행 가능
  - 빈 `Lobby -> Run -> Result` 라우팅 골격 동작

### A2. 컨텐츠 로더/검증기

- 작업
  - 스키마 로더
  - 무결성 검증기(IR-001~010)
  - 사람이 읽을 수 있는 검증 에러 출력
- 완료 기준
  - `docs/examples/*.sample.json` 검증 통과
  - 참조 깨짐 샘플에 대해 규칙 ID 포함 에러 출력

### A3. RNG/RunState 저장

- 작업
  - `runSeed` 기반 PRNG
  - `RunState` 생성/직렬화/복원
  - `profile/run_save/run_history` 저장 서비스
- 완료 기준
  - 동일 `runSeed`로 소환 100회 결과가 동일
  - 웨이브 종료 자동 저장 동작

## 2. Epic B — Combat Core (M0 본체)

### B1. 상태머신

- 작업
  - `Prepare/Combat/Reward/BossIntro/Result` 구현
  - 전이 가드/실패 처리 구현
- 완료 기준
  - 잘못된 전이 차단
  - 모든 전이에서 UI 반영

### B2. 전투 루프

- 작업
  - 스폰 스케줄러
  - 타겟팅(`frontMost`, `lowestHp`)
  - 데미지/크리/상태이상
  - 누락 적 성문 타격
- 완료 기준
  - 웨이브 1~5 시뮬레이션 가능
  - 이벤트 로그 필수 이벤트 기록

### B3. 배치/합성/시너지

- 작업
  - 슬롯 배치
  - 동일 유닛 3개 합성
  - 태그 카운팅 기반 시너지 적용
- 완료 기준
  - 합성/시너지 효과가 전투 수치에 반영
  - 시너지 패널 카운트 갱신

## 3. Epic C — UX Vertical Slice (M0 완료)

### C1. HUD/보상/결과

- 작업
  - HUD(골드/웨이브/성문HP/버튼)
  - 보상 카드 3선택
  - 결과 통계 + runSeed 노출
- 완료 기준
  - 1판 완주 가능(로비->결과)
  - 보상 선택이 RunState에 반영

### C2. 튜토리얼 최소

- 작업
  - 1분 튜토리얼(소환 3회/합성 1회/시너지 1회)
- 완료 기준
  - 첫 플레이 시 자동 진입
  - 스킵 가능

## 4. Epic D — M1 확장

### D1. 컨텐츠 확장

- 작업
  - 유닛 12종/시너지 6종/유물 20개/웨이브 20
- 완료 기준
  - 코드 변경 없이 컨텐츠 파일만으로 조정 가능

### D2. 품질/성능

- 작업
  - 핵심 단위 테스트
  - 디버그 오버레이
  - 모바일 30fps 최적화
- 완료 기준
  - CI에서 테스트 통과
  - 저사양 모드에서 프레임 유지

## 5. 의존성 순서

1. A1 -> A2 -> A3
2. B1 -> B2 -> B3
3. C1 -> C2
4. D1 -> D2

## 6. 릴리즈 게이트 (M0)

- 컨텐츠 검증 실패율 0%
- 1판 완주 가능
- `runSeed` 재현성 확인
- 중단 후 재개 성공

